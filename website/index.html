<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title> Main page </title>
        <link rel="stylesheet" href="main.css">
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    </head>
    <body>
        <h1>Exemple</h1>
        <select name="cars" id="cars-select">
            <option value="">--Please choose a car--</option>
            <option value="1">Test 1</option>
            <option value="2">Test 2</option>
        </select>
        <button id="select">Selectionner</button>
        <div id="infos">Test</div>
    </body>
    <footer>
        <!-- <script src="main.js"></script> -->
        <script src="/socket.io/socket.io.js"></script>
        <script>
            let socket = io();
        	let cars = document.getElementById("cars-select");
            let buttonSelect = document.getElementById("select");
            let infos = document.getElementById("infos");

            socket.on('cars', function (result) {
                cars.innerHTML=''
                result.getCarsResult.string.forEach(car => {
                    cars.innerHTML+='<option value="' + car + '">' + car + '</option>'
                });
            });

            socket.on('info', function (result) {
                infos.innerHTML = 'Nom du véhicule: ' + result.getInfoResult.string[0]
                infos.innerHTML += '<br>Autonomie: ' + result.getInfoResult.string[1] + 'Km'
                infos.innerHTML += '<br>Vitesse maximal: ' + result.getInfoResult.string[2] + 'Km/h'
                infos.innerHTML += '<br>Consomation électrique: ' + result.getInfoResult.string[3] + 'Wh/Km'
                infos.innerHTML += '<br>Charge rapide: ' + result.getInfoResult.string[4] + 'W'
                infos.innerHTML += '<br>Charge normal: ' + result.getInfoResult.string[5] + 'W'
                infos.innerHTML += '<br>Capacité: ' + result.getInfoResult.string[6] + 'Wh'
            });

            buttonSelect.addEventListener("click", function() {
                socket.emit('car', cars.value);
            });
		</script>
    </footer>
</html>